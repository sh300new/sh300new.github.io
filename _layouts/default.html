<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
  <div class="sidebar">
    <h2>카테고리</h2>
    <ul>
      <!-- 프로젝트 카테고리 -->
      <li>
        <a href="javascript:void(0)" onclick="toggleSubcategories('project')">프로젝트</a>
        <ul id="project" style="display: none;">
          {% assign project_files = site.static_files | where_exp: "file", "file.path contains '/project/'" %}
          {% for file in project_files %}
            <li><a href="{{ file.path | relative_url }}">{{ file.name | remove: '.html' }}</a></li>
          {% endfor %}
        </ul>
      </li>

      <!-- 기술 고민 카테고리 -->
      <li>
        <a href="javascript:void(0)" onclick="toggleSubcategories('tech')">기술 고민</a>
        <ul id="tech" style="display: none;">
          {% assign tech_files = site.static_files | where_exp: "file", "file.path contains '/tech/'" %}
          {% for file in tech_files %}
            <li><a href="{{ file.path | relative_url }}">{{ file.name | remove: '.html' }}</a></li>
          {% endfor %}
        </ul>
      </li>

      <!-- 잡 고민 카테고리 -->
      <li>
        <a href="javascript:void(0)" onclick="toggleSubcategories('job')">잡 고민</a>
        <ul id="job" style="display: none;">
          {% assign job_files = site.static_files | where_exp: "file", "file.path contains '/job/'" %}
          {% for file in job_files %}
            <li><a href="{{ file.path | relative_url }}">{{ file.name | remove: '.html' }}</a></li>
          {% endfor %}
        </ul>
      </li>
    </ul>
  </div>

  <div class="content">
    {{ content }}
  </div>

<script>
  // 페이지 로드 시 URL 파라미터에 따라 하위 항목 표시
  document.addEventListener("DOMContentLoaded", function() {
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get("category");
    if (category) {
      toggleSubcategories(category); // 파라미터가 있으면 해당 카테고리 열기
    }
  });

  // 카테고리를 클릭하면 해당 파라미터를 추가하여 이동
  function toggleSubcategories(categoryId) {
    var element = document.getElementById(categoryId);
    element.style.display = (element.style.display === 'none') ? 'block' : 'none';
  }

  // 링크에 파라미터 추가
  function navigateTo(category, path) {
    const url = path + "?category=" + category;
    window.location.href = url;
  }
</script>

</body>
</html>
